{"version":3,"file":"js/277.092f7531.js","mappings":"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","sources":["webpack://vue-live-week7/./src/components/DeleteModal.vue","webpack://vue-live-week7/./src/components/DeleteModal.vue?3ed7","webpack://vue-live-week7/./src/views/AdminCouponView.vue","webpack://vue-live-week7/./src/components/CouponModal.vue","webpack://vue-live-week7/./src/components/CouponModal.vue?3d2f","webpack://vue-live-week7/./src/views/AdminCouponView.vue?f78c"],"sourcesContent":["<template>\r\n  <div id=\"deleteModal\" ref=\"deleteModal\" class=\"modal fade\" tabindex=\"-1\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content border-0\">\r\n          <div class=\"modal-header bg-danger text-white\">\r\n            <h5 id=\"deleteModalLabel\" class=\"modal-title\">\r\n              <span>刪除後將無法恢復</span>\r\n            </h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\" v-if=\"item.title\">\r\n            是否確認刪除\r\n            <strong class=\"text-danger\">{{ item.title }}</strong> ?\r\n          </div>\r\n          <div class=\"modal-body\" v-else>\r\n            是否確認刪除 訂單編號\r\n            <strong class=\"text-danger\"> {{ item.id }}</strong> ?\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">\r\n              取消\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-danger\" data-bs-dismiss=\"modal\" @click=\"$emit('delete-item')\">\r\n              確認刪除\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal' // 不懂\r\n\r\nexport default {\r\n  name: 'DeleteModal',\r\n  props: ['item'],\r\n  emits: ['delete-item'],\r\n  data () {\r\n    return {\r\n      modal: {}\r\n    }\r\n  },\r\n  mounted () {\r\n    this.modal = new Modal(this.$refs.deleteModal)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./DeleteModal.vue?vue&type=template&id=d5df6b3c\"\nimport script from \"./DeleteModal.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue-Live-Week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"container my-5\">\r\n    <Loading-component :active=\"isLoading\"></Loading-component>\r\n    <h1>優惠券管理</h1>\r\n        <!-- 產品modal -->\r\n    <coupon-modal :coupon=\"tempCoupon\" :current-page=\"currentPage\" ref=\"CouponModal\" @get-coupons=\"getCoupons\"></coupon-modal>\r\n    <!-- 刪除modal -->\r\n    <delete-modal :item=\"tempCoupon\" ref=\"deleteModal\" @delete-item=\"deleteCoupon\"></delete-modal>\r\n\r\n    <div class=\"text-end mt-3\">\r\n      <button class=\"btn btn-primary\" type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#couponModal\" @click=\"tempCoupon={due_date: new Date().getTime() / 1000, is_enabled:0}\">\r\n        建立新的優惠券\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n      <tr>\r\n        <th>名稱</th>\r\n        <th>折扣百分比</th>\r\n        <th>到期日</th>\r\n        <th>是否啟用</th>\r\n        <th>編輯</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"(coupon, key) in coupons\" :key=\"key\">\r\n        <td>{{ coupon.title }}</td>\r\n        <td>{{ coupon.percent }}%</td>\r\n        <td>{{ $filters.date(coupon.due_date) }}\r\n        </td>\r\n        <td>\r\n          <span v-if=\"coupon.is_enabled === 1\" class=\"text-success\">啟用</span>\r\n          <span v-else class=\"text-muted\">未啟用</span>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#couponModal\" @click=\"openCouponModal(coupon)\">\r\n              編輯\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#deleteModal\" @click=\"openDeleteModal(coupon)\">\r\n              刪除\r\n            </button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n    <pagination-component :pages=\"pagination\" @get-items=\"getCoupons\"></pagination-component>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CouponModal from '@/components/CouponModal.vue'\r\nimport DeleteModal from '@/components/DeleteModal.vue'\r\nimport PaginationComponent from '@/components/PaginationComponent.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      coupons: [],\r\n      tempCoupon: {\r\n      },\r\n      pagination: {},\r\n      currentPage: 1,\r\n      isLoading: false\r\n    }\r\n  },\r\n  components: {\r\n    PaginationComponent,\r\n    CouponModal,\r\n    DeleteModal\r\n  },\r\n  methods: {\r\n    getCoupons (page = 1) {\r\n      this.isLoading = true\r\n      this.currentPage = page\r\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupons/?page=${page}`)\r\n        .then((response) => {\r\n          this.coupons = response.data.coupons\r\n          this.pagination = response.data.pagination\r\n          this.isLoading = false\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '錯誤訊息')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    openCouponModal (item) {\r\n      this.isLoading = true\r\n      this.tempCoupon = JSON.parse(JSON.stringify(item))\r\n      this.isLoading = false\r\n    },\r\n    openDeleteModal (item) {\r\n      this.isLoading = true\r\n      this.tempCoupon = item\r\n      this.isLoading = false\r\n    },\r\n    deleteCoupon () {\r\n      this.isLoading = true\r\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`)\r\n        .then((response) => {\r\n          // alert(response.data.message)\r\n          this.$httpMessageState(response, '刪除優惠券')\r\n          this.getCoupons()\r\n          this.isLoading = false\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '刪除優惠券')\r\n          this.isLoading = false\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCoupons()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" ref=\"couponModal\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span v-if=\"tempCoupon.id\">編輯優惠券</span>\r\n            <span v-else>新增優惠券</span>\r\n          </h5>\r\n          <button type=\"button\" class=\"btn-close\"\r\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"title\">標題</label>\r\n            <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"tempCoupon.title\"\r\n                   placeholder=\"請輸入標題\">\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"coupon_code\">優惠碼</label>\r\n            <input type=\"text\" class=\"form-control\" id=\"coupon_code\" v-model=\"tempCoupon.code\"\r\n                   placeholder=\"請輸入優惠碼\">\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"due_date\">到期日</label>\r\n            <input type=\"date\" class=\"form-control\" id=\"due_date\"\r\n                   v-model=\"due_date\">\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"price\">折扣百分比</label>\r\n            <input type=\"number\" class=\"form-control\" id=\"price\"\r\n            min=\"0\" v-model.number=\"tempCoupon.percent\" placeholder=\"請輸入折扣百分比\">\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-check\">\r\n              <input id=\"is_enabled\" class=\"form-check-input\" type=\"checkbox\" :true-value=\"1\" :false-value=\"0\" v-model=\"tempCoupon.is_enabled\">\r\n              <label class=\"form-check-label\" for=\"is_enabled\">是否啟用</label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">\r\n            取消\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" v-if=\"tempCoupon.id\" @click=\"editCoupon\">\r\n            確認編輯\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" v-else @click=\"addCoupon\">\r\n            確認新增\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal' // 不懂\r\n\r\nexport default {\r\n  name: 'CouponModal',\r\n  emits: ['get-coupons'],\r\n  props: {\r\n    coupon: {}\r\n  },\r\n  data () {\r\n    return {\r\n      modal: {},\r\n      tempCoupon: {},\r\n      due_date: ''\r\n    }\r\n  },\r\n  watch: {\r\n    coupon () {\r\n      this.tempCoupon = this.coupon\r\n      // 參考助教範例\r\n      // 將時間格式改為 YYYY-MM-DD\r\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\r\n        .toISOString().split('T');\r\n      [this.due_date] = dateAndTime\r\n    },\r\n    due_date () {\r\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000)\r\n    }\r\n  },\r\n  methods: {\r\n    addCoupon () {\r\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon`, { data: this.tempCoupon })\r\n        .then((response) => {\r\n          // alert(response.data.message)\r\n          this.$httpMessageState(response, '新增優惠券')\r\n          this.$emit('get-coupons', this.currentPage)\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '錯誤訊息')\r\n        })\r\n    },\r\n    editCoupon () {\r\n      this.$http.put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`, { data: this.tempCoupon })\r\n        .then((response) => {\r\n          // alert(response.data.message)\r\n          this.$httpMessageState(response, '編輯優惠券')\r\n          this.$emit('get-coupons', this.currentPage)\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '錯誤訊息')\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.modal = new Modal(this.$refs.couponModal)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CouponModal.vue?vue&type=template&id=d400c6bc\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue-Live-Week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./AdminCouponView.vue?vue&type=template&id=9d6ddee0\"\nimport script from \"./AdminCouponView.vue?vue&type=script&lang=js\"\nexport * from \"./AdminCouponView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue-Live-Week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","ref","class","tabindex","_createElementVNode","type","_createElementBlock","_hoisted_4","$props","title","_toDisplayString","_hoisted_14","onClick","_ctx","name","props","emits","data","modal","mounted","this","Modal","$refs","deleteModal","__exports__","render","_createVNode","_component_Loading_component","active","$data","_hoisted_2","_component_coupon_modal","coupon","onGetCoupons","$options","_component_delete_modal","item","onDeleteItem","due_date","Date","getTime","is_enabled","_hoisted_5","_Fragment","_renderList","key","percent","date","_hoisted_9","_hoisted_10","_component_pagination_component","pages","onGetItems","role","for","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_11","$event","placeholder","_hoisted_13","code","_hoisted_15","_hoisted_17","min","_hoisted_20","_hoisted_22","tempCoupon","watch","dateAndTime","toISOString","split","Math","floor","methods","addCoupon","$http","post","then","response","$httpMessageState","$emit","currentPage","catch","error","editCoupon","put","couponModal","coupons","pagination","isLoading","components","PaginationComponent","CouponModal","DeleteModal","getCoupons","page","get","openCouponModal","JSON","parse","stringify","openDeleteModal","deleteCoupon","delete"],"sourceRoot":""}