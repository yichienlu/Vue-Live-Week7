{"version":3,"file":"js/732.6ab06956.js","mappings":"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","sources":["webpack://vue-live-week7/./src/views/CartView.vue","webpack://vue-live-week7/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <loading-component :active=\"isLoading\"></loading-component>\r\n    <h1 class=\"text-center\">購物車</h1>\r\n    <div v-if=\"cartData.carts.length == 0\" class=\"my-5 text-center\">\r\n      <router-link to=\"/products\">\r\n        購物車裡沒有東西！快去逛逛吧！！\r\n      </router-link>\r\n    </div>\r\n    <div v-else>\r\n      <div class=\"text-end\">\r\n          <button class=\"btn btn-outline-danger\" type=\"button\" :disabled=\"cartData.carts.length === 0\"\r\n              @click=\"clearCart\">\r\n              清空購物車\r\n          </button>\r\n        </div>\r\n      <table class=\"table align-middle\">\r\n        <thead>\r\n          <tr>\r\n            <th>品名</th>\r\n            <th class=\"text-center\">單價</th>\r\n            <th style=\"width: 150px\">數量</th>\r\n            <th class=\"text-end\">合計</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\r\n            <td>\r\n              <router-link :to=\"`/product/${item.product.id}`\" class=\"link-dark text-decoration-none d-flex align-items-center\">\r\n                <img :src=\"item.product.imageUrl\" :alt=\"item.product.title\" height=\"100\" class=\"mx-3\">\r\n                <div>\r\n                  <h5>{{ item.product.title }}</h5>\r\n                  <p>{{ item.product.description }}</p>\r\n                <!-- <div class=\"text-success\">\r\n                  已套用優惠券\r\n                </div> -->\r\n                </div>\r\n              </router-link>\r\n            </td>\r\n            <td class=\"text-center\">\r\n              <div v-if=\"item.product.price===item.product.origin_price\">\r\n                {{ item.price }} 元\r\n              </div>\r\n              <div v-else>\r\n                <small>\r\n                  <del>{{ item.product.origin_price }} 元</del>\r\n                </small>\r\n                <div>{{ item.product.price }} 元</div>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class=\"input-group mb-3\">\r\n                <button class=\"btn btn-secondary\" type=\"button\" @click=\"updateCartItem(item, -1)\">-</button>\r\n                <input type=\"number\"\r\n                        onkeypress=\"return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57\"\r\n                        class=\"form-control text-center\" v-model.number=\"item.qty\"\r\n                        @change=\"updateCartItem(item, 0)\">\r\n                <button class=\"btn btn-secondary\" type=\"button\" @click=\"updateCartItem(item, 1)\">+</button>\r\n              </div>\r\n              <button type=\"button\" class=\"btn btn-outline-danger btn-sm\"\r\n                @click=\"removeCartItem(item.id)\" :disabled=\"isLoadingItem===item.id\">\r\n                刪除\r\n              </button>\r\n            </td>\r\n            <td class=\"text-end\">\r\n              <!-- <small class=\"text-success\">折扣價：</small> -->\r\n              {{ item.total }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td colspan=\"3\" class=\"text-end\">總計</td>\r\n            <td class=\"text-end\">{{ cartData.total }}</td>\r\n          </tr>\r\n          <tr>\r\n            <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n            <td class=\"text-end text-success\">\r\n              {{ Math.floor(cartData.final_total) }} <br>\r\n              <small v-if=\"cartData.carts[0].coupon\" class=\"text-mute\">(已套用「{{ cartData.carts[0].coupon.title }}」優惠券：{{ cartData.carts[0].coupon.code }})</small>\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n      <div class=\"input-group mb-3 input-group-sm\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          v-model=\"couponCode\"\r\n          placeholder=\"請輸入優惠碼\"\r\n          ref=\"couponCode\"\r\n        />\r\n        <div class=\"input-group-append\">\r\n          <button\r\n            class=\"btn btn-outline-secondary\"\r\n            type=\"button\"\r\n            @click=\"addCouponCode\">\r\n            套用優惠碼\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 表單 -->\r\n    <div class=\"my-5\">\r\n      <h3 class=\"text-center mb-3\">訂購人資訊</h3>\r\n      <div class=\"row justify-content-center\">\r\n        <form-component ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"email\" class=\"form-label\">Email</label>\r\n            <field-component id=\"email\" name=\"email\" type=\"email\" class=\"form-control\" rules=\"email|required\"\r\n                  :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\"\r\n                  v-model=\"form.user.email\"></field-component>\r\n            <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\r\n            <field-component id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\"\r\n                    :class=\"{ 'is-invalid': errors['姓名'] }\" placeholder=\"請輸入姓名\" rules=\"required\"\r\n                    v-model=\"form.user.name\"></field-component>\r\n            <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\r\n            <field-component id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\"\r\n                    :class=\"{ 'is-invalid': errors['電話'] }\" placeholder=\"請輸入電話\" :rules=\"isPhone\"\r\n                    v-model=\"form.user.tel\"></field-component>\r\n            <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\r\n            <field-component id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\"\r\n                    :class=\"{ 'is-invalid': errors['地址'] }\" placeholder=\"請輸入地址\" rules=\"required\"\r\n                    v-model=\"form.user.address\"></field-component>\r\n            <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <label for=\"message\" class=\"form-label\">留言</label>\r\n            <textarea id=\"message\" class=\"form-control\" cols=\"30\" rows=\"10\" v-model=\"form.message\"></textarea>\r\n          </div>\r\n          <div class=\"text-end\">\r\n            <button type=\"submit\" class=\"btn btn-danger\"\r\n                    :disabled=\"Object.keys(errors).length > 0 || cartData.carts.length === 0\">\r\n                    送出訂單\r\n            </button>\r\n          </div>\r\n        </form-component>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/libs/emitter'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      products: [],\r\n      product: {},\r\n      couponCode: '',\r\n      isLoading: false,\r\n      isLoadingItem: '',\r\n      form: {\r\n        user: {\r\n          email: '',\r\n          name: '',\r\n          tel: '',\r\n          address: ''\r\n        },\r\n        message: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.isLoading = true\r\n      this.$http\r\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\r\n        .then((response) => {\r\n          this.cartData = response.data.data\r\n          emitter.emit('get-cart')\r\n          this.isLoading = false\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '錯誤訊息')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    removeCartItem (id) {\r\n      this.isLoadingItem = id\r\n      this.$http\r\n        .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`)\r\n        .then((response) => {\r\n          // alert(response.data.message)\r\n          this.$httpMessageState(response, '移除購物車品項')\r\n          this.getCart()\r\n          this.isLoadingItem = ''\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '移除購物車品項')\r\n          this.isLoadingItem = ''\r\n        })\r\n    },\r\n    updateCartItem (item, num) {\r\n      if (item.qty + num === 0) {\r\n        this.removeCartItem(item.id)\r\n        return\r\n      }\r\n      if ((item.qty + num) < 1 || item.qty % 1 !== 0) {\r\n        // alert('輸入數量錯誤')\r\n        this.emitter.emit('push-message', {\r\n          style: 'success',\r\n          title: '錯誤訊息',\r\n          content: '輸入數量錯誤'\r\n        })\r\n        return\r\n      }\r\n      const data = {\r\n        product_id: item.id,\r\n        qty: item.qty + num\r\n      }\r\n      this.isLoadingItem = item.id\r\n      this.$http\r\n        .put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, { data })\r\n        .then((response) => {\r\n          // alert(response.data.message)\r\n          this.$httpMessageState(response, '更新購物車')\r\n          this.getCart()\r\n          this.isLoadingItem = ''\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '更新購物車')\r\n          this.isLoadingItem = ''\r\n        })\r\n    },\r\n    clearCart () {\r\n      this.isLoading = true\r\n      setTimeout(() => {\r\n        this.isLoading = false\r\n      }, 1000)\r\n\r\n      this.$http\r\n        .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`)\r\n        .then((response) => {\r\n          // alert('已清空購物車')\r\n          this.$httpMessageState(response, '清空購物車')\r\n          this.getCart()\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '清空購物車')\r\n        })\r\n    },\r\n    addCouponCode () {\r\n      this.isLoading = true\r\n      const data = {\r\n        code: this.couponCode\r\n      }\r\n      this.$http\r\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`, { data })\r\n        .then((response) => {\r\n          // alert(response.data.message)\r\n          this.$httpMessageState(response, '套用優惠券')\r\n          this.couponCode = ''\r\n          this.getCart()\r\n          this.isLoading = false\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '套用優惠券')\r\n          this.couponCode = ''\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    createOrder () {\r\n      this.isLoading = true\r\n      setTimeout(() => {\r\n        this.isLoading = false\r\n      }, 1000)\r\n\r\n      const order = {\r\n        data: this.form\r\n      }\r\n      this.$http\r\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`, order)\r\n        .then((response) => {\r\n          this.$httpMessageState(response, '送出訂單')\r\n          this.$refs.form.resetForm()\r\n          this.form.message = ''\r\n          this.$router.push(`/checkout/${response.data.orderId}`)\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '送出訂單')\r\n        })\r\n    },\r\n\r\n    isPhone (value) {\r\n      const phoneNumber = /^(09)[0-9]{8}$/\r\n      return phoneNumber.test(value) ? true : '電話格式錯誤'\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  input::-webkit-outer-spin-button,\r\n  input::-webkit-inner-spin-button {\r\n    display: none;\r\n  }\r\n</style>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=19bff5ce\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport \"./CartView.vue?vue&type=style&index=0&id=19bff5ce&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue-Live-Week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","colspan","for","_createElementBlock","_createVNode","_component_loading_component","active","$data","_hoisted_2","carts","length","_component_router_link","to","_hoisted_5","type","disabled","onClick","$options","_hoisted_7","_hoisted_9","_Fragment","_renderList","item","key","id","product","src","imageUrl","alt","title","height","_toDisplayString","description","price","origin_price","_hoisted_12","_hoisted_13","_hoisted_15","onkeypress","qty","$event","onChange","_hoisted_17","_hoisted_18","total","_hoisted_20","_hoisted_22","Math","floor","final_total","_hoisted_24","coupon","code","placeholder","ref","_hoisted_29","_component_form_component","onSubmit","errors","_hoisted_32","_component_field_component","name","rules","user","email","_component_error_message","_hoisted_34","_hoisted_36","tel","_hoisted_38","address","_hoisted_40","cols","rows","message","Object","keys","_hoisted_42","data","cartData","products","couponCode","isLoading","isLoadingItem","form","methods","getCart","this","$http","get","then","response","emitter","catch","error","$httpMessageState","removeCartItem","delete","updateCartItem","num","emit","content","product_id","put","clearCart","setTimeout","addCouponCode","post","createOrder","order","$refs","resetForm","$router","push","orderId","isPhone","value","phoneNumber","test","mounted","__exports__","render"],"sourceRoot":""}