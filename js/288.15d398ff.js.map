{"version":3,"file":"js/288.15d398ff.js","mappings":"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","sources":["webpack://vue-live-week7/./src/views/ProductsView.vue","webpack://vue-live-week7/./src/components/ProductModal.vue","webpack://vue-live-week7/./src/components/ProductModal.vue?b0ff","webpack://vue-live-week7/./src/views/ProductsView.vue?91db"],"sourcesContent":["<template>\r\n  <div class=\"container my-5\">\r\n    <h1>商品列表</h1>\r\n    <loading-component :active=\"isLoading\"></loading-component>\r\n    <!-- 產品Modal -->\r\n    <product-modal :product=\"product\" ref=\"productModal\" @add-to-cart=\"addToCart\"></product-modal>\r\n    <!-- 產品Modal -->\r\n    <select id=\"productSelect\" v-model=\"category\" @change=\"getProducts(1,category)\" class=\"form-select mb-3\">\r\n      <option value=\"\">全部商品</option>\r\n      <option value=\"貓貓\">貓貓</option>\r\n      <option value=\"狗狗\">狗狗</option>\r\n    </select>\r\n    <h3 class=\"text-center\">\r\n      <span v-if=\"category\">{{category}}</span>\r\n      <span v-else>全部商品</span>\r\n    </h3>\r\n    <div class=\"row row-cols-2 row-cols-lg-4 g-3 mb-5\">\r\n      <div class=\"col\" v-for=\"product in products\" :key=\"product.id\">\r\n        <div class=\"card h-100\">\r\n          <div class=\"card-img-top\" :style=\"`height:200px; background-image: url(${product.imageUrl}); background-size: cover; background-position:center`\"></div>\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">{{ product.title }}</h5>\r\n            <h6 class=\"card-subtitle mb-2 text-muted\">\r\n              <div class=\"h5\" v-if=\"product.price===product.origin_price\">\r\n                  {{ product.origin_price }} 元\r\n              </div>\r\n              <div v-else>\r\n                  <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\r\n                  <div class=\"h5\">現在只要 {{ product.price }} 元</div>\r\n              </div>\r\n            </h6>\r\n            <p class=\"card-text\">{{ product.description }}</p>\r\n          </div>\r\n          <div class=\"card-footer border-0 bg-white text-center\">\r\n            <div class=\"btn-group btn-group-sm mt-auto\">\r\n              <button type=\"button\" class=\"btn btn-outline-secondary\"\r\n                  @click=\"openProductModal(product)\" :disabled=\"isLoadingItem===product.id\">\r\n                  查看更多\r\n              </button>\r\n              <button type=\"button\" class=\"btn btn-danger\" @click=\"addToCart(product.id)\"\r\n                  :disabled=\"isLoadingItem===product.id\">\r\n                  <span class=\"spinner-grow spinner-grow-sm\"\r\n                      v-show=\"isLoadingItem===product.id\"></span>\r\n                  加到購物車\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <pagination-component :pages=\"pagination\" @get-items=\"getProducts\"></pagination-component>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductModal from '@/components/ProductModal.vue'\r\nimport PaginationComponent from '@/components/PaginationComponent.vue'\r\nimport emitter from '@/libs/emitter'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      products: [],\r\n      product: {},\r\n      category: '',\r\n      pagination: {},\r\n      currentPage: 1,\r\n      isLoading: false,\r\n      isLoadingItem: ''\r\n    }\r\n  },\r\n  components: {\r\n    ProductModal,\r\n    PaginationComponent\r\n  },\r\n  methods: {\r\n    getProducts (page = 1, category = '') {\r\n      this.isLoading = true\r\n      this.$http\r\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/?page=${page}&category=${category}`)\r\n        .then((response) => {\r\n          this.products = response.data.products\r\n          this.pagination = response.data.pagination\r\n          this.isLoading = false\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '錯誤訊息')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    openProductModal (product) {\r\n      this.isLoading = true\r\n      this.product = product\r\n      this.$refs.productModal.openModal()\r\n      this.isLoading = false\r\n    },\r\n    addToCart (id, qty = 1) {\r\n      if (qty < 1 || qty % 1 !== 0) {\r\n        // alert('輸入數量錯誤')\r\n        this.emitter.emit('push-message', {\r\n          style: 'success',\r\n          title: '錯誤訊息',\r\n          content: '輸入數量錯誤'\r\n        })\r\n        return\r\n      }\r\n      const data = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      this.isLoadingItem = id\r\n      this.$http\r\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data })\r\n        .then((response) => {\r\n          // alert(response.data.message)\r\n          this.$httpMessageState(response, '加入購物車')\r\n          emitter.emit('get-cart')\r\n          this.$refs.productModal.closeModal()\r\n          this.isLoadingItem = ''\r\n        })\r\n        .catch((error) => {\r\n          // alert(error.response.data.message)\r\n          this.$httpMessageState(error.response, '加入購物車')\r\n          this.isLoadingItem = ''\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getProducts()\r\n  }\r\n}\r\n\r\n</script>\r\n","<template>\r\n  <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content border-0\">\r\n            <div class=\"modal-header bg-dark text-white\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n                    <span>{{ product.title }}</span>\r\n                </h5>\r\n                <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-sm-6\">\r\n                        <img class=\"img-fluid\" :src=\"product.imageUrl\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"col-sm-6\">\r\n                        <span class=\"badge bg-primary rounded-pill\">{{ product.category }}</span>\r\n                        <p>商品描述：{{ product.description }}</p>\r\n                        <p>商品內容：{{ product.content }}</p>\r\n                        <div class=\"h5\" v-if=\"product.price===product.origin_price\">{{ product.price }} 元</div>\r\n                        <div v-else>\r\n                            <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\r\n                            <div class=\"h5\">現在只要 {{ product.price }} 元</div>\r\n                        </div>\r\n                        <div>\r\n                            <div class=\"input-group\">\r\n                                <input ref=\"input\" type=\"number\"\r\n                                  class=\"form-control\" v-model.number=\"qty\" min=\"1\" step=\"1\"\r\n                                  onkeypress=\"return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57\">\r\n                                <button type=\"button\" class=\"btn btn-primary\" @click=\"addToCart\">加入購物車</button>\r\n                            </div>\r\n                        </div>\r\n                        <router-link :to=\"`/product/${product.id}`\" @click=\"closeModal\">查看更多細節</router-link>\r\n                    </div>\r\n                    <!-- col-sm-6 end -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal' // 不懂\r\n\r\nexport default {\r\n  name: 'ProductModal',\r\n  props: ['product'],\r\n  data () {\r\n    return {\r\n      modal: {},\r\n      qty: 1\r\n    }\r\n  },\r\n  watch: {\r\n    id () {\r\n      this.getProduct()\r\n    }\r\n  },\r\n  methods: {\r\n    openModal () {\r\n      this.modal.show()\r\n    },\r\n    closeModal () {\r\n      this.modal.hide()\r\n      setTimeout(() => {\r\n        this.qty = 1\r\n      }, 500)\r\n    },\r\n    addToCart () {\r\n      this.$emit('add-to-cart', this.product.id, this.qty)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.modal = new Modal(this.$refs.modal)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./ProductModal.vue?vue&type=template&id=094f4b10\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue-Live-Week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductsView.vue?vue&type=template&id=da26dd62\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\Desktop\\\\Vue-Live-Week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","value","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_hoisted_2","_createVNode","_component_loading_component","active","$data","_component_product_modal","product","ref","onAddToCart","$options","id","$event","onChange","_hoisted_8","_toDisplayString","_hoisted_9","_Fragment","_renderList","key","style","imageUrl","title","price","origin_price","_hoisted_16","description","type","onClick","disabled","_hoisted_22","_component_pagination_component","pages","onGetItems","tabindex","role","$props","src","alt","category","content","_hoisted_13","min","step","onkeypress","_component_router_link","to","name","props","data","modal","qty","watch","this","getProduct","methods","openModal","show","closeModal","hide","setTimeout","addToCart","$emit","mounted","Modal","$refs","__exports__","cartData","carts","products","pagination","currentPage","isLoading","isLoadingItem","components","ProductModal","PaginationComponent","getProducts","page","$http","get","then","response","catch","error","$httpMessageState","openProductModal","productModal","emitter","emit","product_id","post","render"],"sourceRoot":""}